= The SDK
:toc:
:toc-title: 목차
:sectanchors:
:sectlinks:
:sectnums:

재사용 가능한 Spring Boot 컴포넌트를 위한 모듈형 SDK입니다.

== 주요 기능

* *로깅 필터*: HTTP 요청/응답 자동 로깅 및 커스텀 제외 패턴 지원
* *응답 래퍼*: 일관된 형식의 API 응답 자동 래핑
* *Swagger 설정*: 사전 구성된 Swagger/OpenAPI 문서화
* *예외 핸들러*: 영어/한국어 메시지 지원 글로벌 예외 처리

== 설치

=== JitPack 사용

`build.gradle.kts`에 JitPack 저장소를 추가하세요:

[source,kotlin]
----
repositories {
    maven { url = uri("https://jitpack.io") }
}

dependencies {
    implementation("com.github.themoment-team:the-sdk:1.0")
}
----

== 설정

모든 기능은 기본적으로 자동 구성되고 활성화됩니다. `application.yml`에서 커스터마이징할 수 있습니다:

[source,yaml]
----
sdk:
  logging:
    enabled: true  # 로깅 필터 활성화 여부
    not-logging-urls:  # 로깅 제외 URL 패턴
      - "/v3/api-docs/**"
      - "/swagger-ui/**"

  response:
    enabled: true  # 응답 래퍼 활성화 여부
    not-wrapping-urls:  # 래핑 제외 URL 패턴
      - "/v3/api-docs/**"

  swagger:
    enabled: true  # Swagger 활성화 여부
    title: "My API"  # API 제목
    description: "API Documentation"  # API 설명
    version: "v1"  # API 버전
    group: "API"  # API 그룹명
    paths-to-match:  # 문서화할 경로 패턴
      - "/v1/**"

  exception:
    enabled: true  # 예외 핸들러 활성화 여부
    use-english-message: true  # true: 영어, false: 한국어
----

== 사용법

=== 응답 래퍼

SDK는 자동으로 API 응답을 일관된 형식으로 래핑합니다:

[source,kotlin]
----
@RestController
class MyController {
    @GetMapping("/users")
    fun getUsers(): List<User> {
        // 반환 타입: CommonApiResponse<List<User>>
        return userService.findAll()
    }
}
----

응답 형식:

[source,json]
----
{
  "status": "OK",
  "code": 200,
  "message": "OK",
  "data": [...]
}
----

=== 예외 처리

비즈니스 로직 오류에는 `ExpectedException`을 사용하세요:

[source,kotlin]
----
import team.themoment.sdk.exception.ExpectedException
import org.springframework.http.HttpStatus

if (user == null) {
    throw ExpectedException("User not found", HttpStatus.NOT_FOUND)
}
----

한국어 메시지 사용 시 (`use-english-message: false`):

[source,kotlin]
----
// 상태 코드에 해당하는 기본 한국어 메시지가 자동으로 적용됩니다
throw ExpectedException(HttpStatus.NOT_FOUND)  // "요청한 리소스를 찾을 수 없습니다"
----

=== 수동 응답 제어

응답 형식을 직접 제어하고 싶다면:

[source,kotlin]
----
import team.themoment.sdk.response.CommonApiResponse

@GetMapping("/custom")
fun custom(): CommonApiResponse<String> {
    return CommonApiResponse.success("커스텀 메시지", "데이터")
}
----

== 라이선스

MIT License - 자세한 내용은 LICENSE 파일을 참조하세요